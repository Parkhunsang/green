<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="newProductns">
	<insert id="insert" parameterType="newProduct">
		<selectKey keyProperty="np_no" order="BEFORE" resultType="integer">
			select nvl(max(np_no),0) + 1 from newProduct
		</selectKey>
		insert into newProduct values(	#{np_no}, #{np_name}, #{np_content}, #{np_image},#{np_price},#{np_discount},
		sysdate,0,#{np_count},'11111111', #{code})
	</insert>
	
	<select id="list" parameterType="map" resultType="newProduct" >
		select * from newProduct order by np_no desc offset #{startRow} rows fetch next #{rowPerPage} rows only
	</select>
	<select id="cate_list" parameterType="map" resultType="newProduct" >
		select * from newProduct where code=#{code} order by np_no desc offset #{startRow} rows fetch next #{rowPerPage} rows only
	</select>
	<select id="select" parameterType="integer" resultType="newProduct">
		select * from newProduct where np_no=#{np_no} 
	</select>
	
	<select id="total" resultType="integer">
		select count(*) from newProduct
	</select>
	
	<update id="update" parameterType="newProduct">
		update newproduct set np_name=#{np_name},np_content=#{np_content},np_price=#{np_price},np_discount=#{np_discount},
			np_count=#{np_count},code=#{code}
			<if test="np_image!=null and np_image!=''">
				,np_image=#{np_image}
			</if>
			where np_no=#{np_no}
	</update>
</mapper>
